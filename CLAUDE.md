# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a multilingual medical practice website for "Praxis Jona" in Berlin, built with Next.js 13+ App Router and TypeScript. The site serves patients with information, blog content, and appointment booking integration.

## Common Development Commands

```bash
# Start development server (runs Contentlayer in watch mode + Next.js dev server)
npm run dev

# Build for production (also generates sitemap via postbuild)
npm run build

# Run linting
npm run lint

# Start production server
npm run start

# Generate sitemap manually
npm run gen-sitemap
```

## Architecture & Key Patterns

### Tech Stack
- **Framework**: Next.js 13.4+ with App Router
- **Language**: TypeScript (tsconfig strict mode disabled)
- **Styling**: Tailwind CSS with custom medical theme colors
- **Content**: MDX blog posts via Contentlayer
- **Email**: SendGrid API for contact forms
- **Analytics**: Vercel Analytics + Umami

### Directory Structure
- `/app` - Next.js App Router pages and components (German by default)
  - `/app/en` - English version pages (mirrors German structure)
  - `/app/components` - Shared UI components (pricing, buttons, sections)
  - `/app/api` - API routes (sendgrid, analytics)
  - `/app/data` - Data files (apps lists in DE/EN)
  - `/app/styles` - Custom CSS animations
  - `/app/leistungen`, `/app/schwerpunkte`, etc. - German service/content pages
- `/posts` - MDX blog content (processed by Contentlayer)
- `/public` - Static assets (images, icons)
- `.contentlayer` - Auto-generated by Contentlayer (gitignored)

### Key Development Patterns

1. **Internationalization**: Manual i18n with `/en` routes for English content. German pages are at root level. When creating new pages, mirror the structure in both locations.

2. **Blog Posts**:
   - Create MDX files in `/posts` directory
   - Contentlayer automatically processes them during `npm run dev` (watch mode) or build
   - Post schema defined in `contentlayer.config.ts` with required fields: `title`, `date`
   - Optional frontmatter: `coverImage`, `author`, `isHidden`, `language`, `slugEn/slugDe`, `summary`, `tags`, `categories`
   - Generated fields: `slug`, `url`, `structuredData` (for SEO)

3. **Styling**:
   - Use Tailwind utilities with custom medical theme colors (primary, darkBeige, lightBeige, tealColor)
   - Custom animations in `/app/styles/animations.css` (slideInFade, zoomIn, zoomOut)
   - Additional keyframes in `tailwind.config.js` (popIn, popOut, fadeIn, fadeOut)

4. **External Integrations**:
   - **Doctolib**: Appointment booking via redirects in `next.config.js` (`/termin-buchen` → Doctolib)
   - **SendGrid**: Contact form email (`/app/api/sendgrid/route.ts`, requires `SENDGRID_API_KEY` env var)
   - **Vercel Analytics**: Analytics tracking integrated
   - **next-sitemap**: Auto-generates sitemap after build (config in `next-sitemap.config.js`)

5. **Shared Components**: Top-level components in `/app` (Contact, Footer, Header, NewsletterSection, etc.) are used across pages. Reusable UI components in `/app/components`.

## Important Configuration

- **next.config.js**:
  - Wrapped with `withContentlayer()` for MDX processing
  - Images: `unoptimized: true`, allows all remote patterns
  - Redirects: `/termin-buchen` → Doctolib, `/qr-google-review` → Google Reviews, etc.
  - Rewrites: `/impressum-datenschutz` and `/imprint-privacy` map to `/legal/*` pages

- **contentlayer.config.ts**: Defines Post schema and MDX processing with rehype plugins (code highlighting, autolink headings, slugs)

- **tailwind.config.js**: Custom theme with medical practice colors and custom animations

- **tsconfig.json**: Strict mode disabled (`"strict": false`), paths configured for Contentlayer

- **Environment Variables**: `SENDGRID_API_KEY` required for contact form functionality

- **Node Requirements**: Requires Node.js >= 22.0.0 (see package.json engines)

- **No test suite**: Project currently has no testing framework configured